# ⚙️ Generated by InfraBuddy — github.com/alexindevs/infrabuddy

FROM python:3.13-slim

ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1

WORKDIR /app

# Optional: Install Poetry or fallback to pip
{{#use_poetry}}
RUN pip install poetry
COPY poetry.lock pyproject.toml /app/
RUN poetry config virtualenvs.create false && poetry install --no-interaction --no-ansi
{{/use_poetry}}
{{^use_poetry}}
COPY requirements.txt /app/
RUN pip install --no-cache-dir -r requirements.txt
{{/use_poetry}}

COPY . /app/

EXPOSE {{port}}

{{#use_gunicorn}}
CMD ["gunicorn", "--bind", "0.0.0.0:{{port}}", "app:app"]
{{/use_gunicorn}}

{{#use_uwsgi}}
CMD ["uwsgi", "--http", ":{{port}}", "--wsgi-file", "app.py", "--callable", "app"]
{{/use_uwsgi}}

{{#use_flask_run}}
ENV FLASK_APP=app.py
CMD ["flask", "run", "--host=0.0.0.0", "--port={{port}}"]
{{/use_flask_run}}
