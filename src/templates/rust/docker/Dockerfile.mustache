# ⚙️ Generated by InfraBuddy — github.com/alexindevs/infrabuddy

FROM rust:1.86 as builder

WORKDIR /app

# Cache dependencies first
COPY Cargo.toml Cargo.lock ./
RUN mkdir src && echo "fn main() {}" > src/main.rs
RUN cargo build --release
RUN rm -rf src

# Copy actual source
COPY . .

RUN cargo build --release

# Final stage
FROM debian:stable-slim

WORKDIR /app

COPY --from=builder /app/target/release/{{project_name}} /app/{{project_name}}

EXPOSE {{port}}

CMD ["./{{project_name}}"]
